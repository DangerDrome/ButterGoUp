import{r as e,a as t}from"./react-vendor-BjGICc7J.js";import{T as r,B as a}from"./trading-charts-u049q0rn.js";import{A as n,C as i,c as s,R as o,H as c,P as l,F as d,a as u,L as m,N as p,B as h,D as g,b as f,d as y,S as b,T as v,e as x,f as w,g as k,h as j,i as N,j as S,k as D,l as I}from"./utils-crlI5-0h.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var C={exports:{}},F={},R=e,E=Symbol.for("react.element"),M=Symbol.for("react.fragment"),T=Object.prototype.hasOwnProperty,U=R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P={key:!0,ref:!0,__self:!0,__source:!0};function z(e,t,r){var a,n={},i=null,s=null;for(a in void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(s=t.ref),t)T.call(t,a)&&!P.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:E,type:e,key:i,ref:s,props:n,_owner:U.current}}F.Fragment=M,F.jsx=z,F.jsxs=z,C.exports=F;var V,Z=C.exports,A=t;function L(e,t){if(e.length<t)return[];const r=[];for(let a=t-1;a<e.length;a++){let n=0;for(let r=0;r<t;r++)n+=e[a-r].close;r.push({value:n/t,time:e[a].time})}return r}function O(e,t){if(e.length<t)return[];const r=2/(t+1),a=[];let n=0;for(let s=0;s<t;s++)n+=e[s].close;let i=n/t;a.push({value:i,time:e[t-1].time});for(let s=t;s<e.length;s++)i=(e[s].close-i)*r+i,a.push({value:i,time:e[s].time});return a}function B(e,t=20,r=2){if(e.length<t)return[];const a=[];for(let n=t-1;n<e.length;n++){let i=0;for(let r=0;r<t;r++)i+=e[n-r].close;const s=i/t;let o=0;for(let r=0;r<t;r++){const t=e[n-r].close-s;o+=t*t}const c=Math.sqrt(o/t);a.push({upper:s+r*c,middle:s,lower:s-r*c,time:e[n].time})}return a}V=A.createRoot,A.hydrateRoot;const $=[{id:"news-001",time:"2024-11-15",title:"Fonterra raises forecast milk price to $9.50/kgMS",description:"Fonterra has raised its 2024/25 season forecast Farmgate Milk Price range to $9.00-$10.00 per kgMS, up from the previous range of $8.25-$9.75 per kgMS.",source:"Fonterra Co-operative Group",url:"https://www.fonterra.com/nz/en/our-stories/media/fonterra-raises-forecast",category:"commodity",impact:"high",relatedIndicators:["milk-farmgate","butter-export","wmp","smp"]},{id:"news-002",time:"2024-10-22",title:"Global dairy prices surge 4.7% at GDT auction",description:"The GDT Price Index rose 4.7%, with whole milk powder up 5.4% to US$3,559/tonne and butter prices climbing 3.2% to US$6,883/tonne.",source:"GlobalDairyTrade",category:"market",impact:"high",relatedIndicators:["butter-export","wmp","smp","amf"]},{id:"news-003",time:"2024-09-18",title:"RBNZ holds OCR at 5.5% amid sticky inflation",description:"The Reserve Bank of New Zealand kept the Official Cash Rate unchanged at 5.5%, citing persistent inflation pressures including rising food prices.",source:"Reserve Bank of New Zealand",category:"economic",impact:"medium",relatedIndicators:["ocr","cpi","nzdusd"]},{id:"news-004",time:"2024-08-05",title:"Butter shortage hits NZ supermarkets",description:"New Zealand consumers face empty butter shelves as strong export demand and limited local supply drive retail prices to record highs above $8 per 500g block.",source:"NZ Herald",category:"market",impact:"high",relatedIndicators:["butter-retail"]},{id:"news-005",time:"2024-07-12",title:"EU-NZ trade deal increases dairy export quotas",description:"The European Union and New Zealand finalize trade agreement, expanding dairy export quotas including a 15% increase for butter exports over 7 years.",source:"Ministry of Foreign Affairs and Trade",category:"regulatory",impact:"medium",relatedIndicators:["butter-export","wmp","smp"]},{id:"news-006",time:"2023-12-15",title:"La Niña weather pattern threatens milk production",description:"NIWA confirms La Niña conditions expected to bring dry conditions to key dairy regions, potentially impacting milk production volumes for 2024 season.",source:"NIWA",category:"general",impact:"medium",relatedIndicators:["milk-farmgate","butter-export","wmp"]},{id:"news-007",time:"2023-10-03",title:"China resumes imports of NZ dairy products",description:"China lifts temporary restrictions on New Zealand dairy imports, boosting demand expectations for whole milk powder and butter in Q4 2023.",source:"Ministry for Primary Industries",category:"market",impact:"high",relatedIndicators:["wmp","butter-export","amf"]},{id:"news-008",time:"2023-08-22",title:"Fonterra posts record annual revenue of $24.7B",description:"Fonterra announces record revenue driven by strong global dairy prices, with butter and milk powder exports leading growth.",source:"Fonterra Annual Report",category:"commodity",impact:"medium",relatedIndicators:["butter-export","wmp","smp","milk-farmgate"]},{id:"news-009",time:"2023-06-14",title:"RBNZ raises OCR to 5.5% to combat inflation",description:"Reserve Bank increases Official Cash Rate by 25 basis points to 5.5%, the highest level since 2008, citing persistent inflation including food prices.",source:"Reserve Bank of New Zealand",category:"economic",impact:"high",relatedIndicators:["ocr","cpi","nzdusd","nzdaud"]},{id:"news-010",time:"2023-04-05",title:"Global dairy demand softens on recession fears",description:"GDT auction sees 7.1% price decline as global buyers reduce purchases amid economic uncertainty, butter prices fall 8.3% to US$5,245/tonne.",source:"GlobalDairyTrade",category:"market",impact:"high",relatedIndicators:["butter-export","wmp","smp"]},{id:"news-011",time:"2022-11-28",title:"Record butter prices as global shortage intensifies",description:"International butter prices hit all-time high of US$7,200/tonne as European production falls and global demand remains strong.",source:"USDA Foreign Agricultural Service",category:"commodity",impact:"high",relatedIndicators:["butter-export","butter-retail"]},{id:"news-012",time:"2022-09-15",title:"Spring milk production exceeds expectations",description:"Favorable weather conditions boost New Zealand spring milk production 4.2% above forecast, easing supply concerns for dairy products.",source:"DairyNZ",category:"commodity",impact:"medium",relatedIndicators:["milk-farmgate","butter-export","wmp","smp"]},{id:"news-013",time:"2022-07-20",title:"Ukraine conflict disrupts global dairy trade",description:"Ongoing conflict in Ukraine affects global dairy supply chains, redirecting trade flows and supporting higher prices for New Zealand exports.",source:"International Dairy Federation",category:"market",impact:"high",relatedIndicators:["butter-export","wmp","smp","amf"]},{id:"news-014",time:"2022-05-10",title:"Fonterra launches sustainability-linked pricing",description:"Fonterra introduces new pricing structure rewarding farmers for meeting sustainability targets, potentially affecting future milk supply costs.",source:"Fonterra Co-operative Group",category:"regulatory",impact:"low",relatedIndicators:["milk-farmgate"]},{id:"news-015",time:"2022-03-02",title:"NZ dollar strengthens on commodity boom",description:"New Zealand dollar reaches 0.69 USD as surging commodity prices, including dairy exports, boost terms of trade.",source:"Reserve Bank of New Zealand",category:"economic",impact:"medium",relatedIndicators:["nzdusd","nzdaud","twi"]},{id:"news-016",time:"2021-12-08",title:"Supply chain crisis impacts dairy packaging",description:"Global shipping delays and packaging shortages affect New Zealand dairy exporters, adding costs and delays to butter and milk powder shipments.",source:"Dairy Companies Association of NZ",category:"market",impact:"medium",relatedIndicators:["butter-export","wmp","smp"]},{id:"news-017",time:"2021-10-19",title:"China dairy demand drives record GDT prices",description:"Strong Chinese buying pushes GDT index up 4.3%, with butter prices reaching US$5,532/tonne amid global supply constraints.",source:"GlobalDairyTrade",category:"market",impact:"high",relatedIndicators:["butter-export","wmp","smp","amf"]},{id:"news-018",time:"2021-08-11",title:"NZ enters COVID-19 lockdown, dairy deemed essential",description:"New Zealand enters nationwide lockdown but dairy processing and exports continue as essential services, maintaining supply chains.",source:"New Zealand Government",category:"general",impact:"low",relatedIndicators:["butter-retail","milk-farmgate"]},{id:"news-019",time:"2021-06-03",title:"Fonterra announces $8.40/kgMS forecast",description:"Fonterra opens 2021/22 season with strong forecast milk price of $7.90-$8.90 per kgMS, reflecting robust global demand.",source:"Fonterra Co-operative Group",category:"commodity",impact:"high",relatedIndicators:["milk-farmgate","butter-export","wmp","smp"]},{id:"news-020",time:"2021-04-14",title:"Environmental regulations tighten for dairy farms",description:"New freshwater regulations come into effect, requiring dairy farmers to reduce nitrogen leaching by 2025, potentially impacting production costs.",source:"Ministry for the Environment",category:"regulatory",impact:"medium",relatedIndicators:["milk-farmgate"]},{id:"news-021",time:"2020-11-25",title:"COVID-19 shifts global dairy consumption patterns",description:"Pandemic drives retail dairy demand up 15% while foodservice sector remains weak, creating volatility in butter and cheese markets.",source:"International Dairy Federation",category:"market",impact:"high",relatedIndicators:["butter-retail","butter-export"]},{id:"news-022",time:"2020-09-08",title:"RBNZ introduces Funding for Lending Programme",description:"Reserve Bank launches new monetary stimulus program to support economy, keeping OCR at record low 0.25% to boost recovery.",source:"Reserve Bank of New Zealand",category:"economic",impact:"high",relatedIndicators:["ocr","nzdusd","nzdaud"]},{id:"news-023",time:"2020-07-01",title:"Dairy prices recover as economies reopen",description:"Global dairy prices rebound from COVID lows, with butter up 23% from April as restaurants and cafes gradually reopen worldwide.",source:"GlobalDairyTrade",category:"market",impact:"medium",relatedIndicators:["butter-export","wmp","smp"]},{id:"news-024",time:"2020-04-22",title:"Dairy exports remain resilient despite lockdowns",description:"New Zealand dairy exports continue flowing to international markets despite domestic lockdown, supporting rural economy.",source:"Ministry for Primary Industries",category:"market",impact:"medium",relatedIndicators:["butter-export","wmp","smp","amf"]},{id:"news-025",time:"2020-02-05",title:"Drought declared in North Island regions",description:"Government declares drought in Northland and parts of Auckland, affecting dairy production and increasing feed costs for farmers.",source:"Ministry for Primary Industries",category:"general",impact:"high",relatedIndicators:["milk-farmgate","butter-export","wmp"]}];const G={high:"#f45171",medium:"#ff9800",low:"#3ecf8e"};async function W(e,t,r){let a=function(e,t){return $.filter(r=>r.time>=e&&r.time<=t)}(e,t);return r&&(a=a.filter(e=>e.relatedIndicators?.includes(r)||!1)),a}function q({newsEvents:t,chart:r}){const[a,i]=e.useState(null),[s,o]=e.useState(null),[c,l]=e.useState(new Map),[d,u]=e.useState(null),[m,p]=e.useState(null),[h,g]=e.useState(null),[f,y]=e.useState(null),b=e.useRef(null);e.useLayoutEffect(()=>{let e;const a=()=>{const n=r.timeScale(),i=new Map;t.forEach(e=>{const t=n.timeToCoordinate(e.time);null!==t&&i.set(e.id,t)}),l(i),e=requestAnimationFrame(a)};return e=requestAnimationFrame(a),()=>{cancelAnimationFrame(e)}},[r,t]);const v=()=>{p(null),y(null)};return Z.jsxs(Z.Fragment,{children:[Z.jsxs("div",{ref:b,className:"news-markers-bar",children:[null!==d&&Z.jsx("div",{className:"news-marker-line selected",style:{left:`${d}px`,borderColor:h||"var(--accent)"}}),null!==m&&d!==m&&Z.jsx("div",{className:"news-marker-line hovered",style:{left:`${m}px`,borderColor:f||"var(--text-secondary)"}}),t.map(e=>{const t=c.get(e.id);if(void 0===t)return null;const r="high"===e.impact?20:16;return Z.jsx("div",{className:"news-marker",style:{left:`${t}px`,marginLeft:`-${r/2}px`},onClick:t=>((e,t)=>{const r=e.currentTarget.getBoundingClientRect(),a=c.get(t.id);o({x:r.left+r.width/2,y:r.top}),i(t),u(a||null),g(G[t.impact])})(t,e),onMouseEnter:t=>((e,t)=>{const r=c.get(t.id);p(r||null),y(G[t.impact])})(0,e),onMouseLeave:v,title:e.title,children:Z.jsx(n,{size:r,color:G[e.impact]})},e.id)})]}),a&&s&&Z.jsx(Y,{news:a,position:s,onClose:()=>{i(null),o(null),u(null),g(null)}})]})}function Y({news:t,position:r,onClose:a}){const n=e.useRef(null);e.useEffect(()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&a()};return setTimeout(()=>{document.addEventListener("mousedown",e)},100),()=>{document.removeEventListener("mousedown",e)}},[a]);return Z.jsxs("div",{ref:n,className:"news-popover",style:{position:"fixed",left:`${r.x}px`,top:r.y-40+"px",transform:"translate(-50%, -100%)"},children:[Z.jsx("div",{className:"news-popover-arrow"}),Z.jsxs("div",{className:"news-popover-content",children:[Z.jsx("h4",{children:t.title}),Z.jsxs("div",{className:"news-popover-meta",children:[Z.jsx("span",{className:"news-date",children:(i=t.time,new Date(i).toLocaleDateString("en-NZ",{year:"numeric",month:"long",day:"numeric"}))}),Z.jsx("span",{className:"news-source",children:t.source})]}),Z.jsx("p",{children:t.description}),t.url&&Z.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"news-link",children:"Read more →"})]})]});var i}function _({data:t,activeIndicators:n=[],chartType:i="candlestick",shouldFitContent:s=!1,setShouldFitContent:o,showNews:c=!1,indicatorId:l}){const d=e.useRef(null),u=e.useRef(null),m=e.useRef(null),p=e.useRef(new Map),[h,g]=e.useState([]);return e.useEffect(()=>{if(!d.current||u.current)return;const e=r(d.current,{width:d.current.clientWidth,height:d.current.clientHeight,layout:{background:{type:a.Solid,color:"#1f1f1f"},textColor:"#8b8b8b"},grid:{vertLines:{color:"rgba(46, 46, 46, 0.5)"},horzLines:{color:"rgba(46, 46, 46, 0.5)"}},crosshair:{mode:1},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!1},handleScale:{axisPressedMouseMove:{time:!0,price:!0},mouseWheel:!0,pinch:!0},rightPriceScale:{borderVisible:!1,scaleMargins:{top:.1,bottom:.1}},timeScale:{borderVisible:!1,rightBarStaysOnScroll:!1,visible:!0,timeVisible:!0,secondsVisible:!1,barSpacing:3,minBarSpacing:.01,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!0,rightOffset:12,shiftVisibleRangeOnNewBar:!1,allowShiftVisibleRangeOnWhitespaceReplacement:!0}});u.current=e;const t=()=>{d.current&&e&&e.applyOptions({width:d.current.clientWidth,height:d.current.clientHeight})};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),p.current.clear(),e.remove(),u.current=null,m.current=null}},[]),e.useEffect(()=>{if(!u.current||!t||0===t.length)return;let e;switch(m.current&&(u.current.removeSeries(m.current),m.current=null),i){case"line":e=u.current.addLineSeries({color:"#3ecf8e",lineWidth:2}),e.setData(t.map(e=>({time:e.time,value:e.close})));break;case"area":e=u.current.addAreaSeries({topColor:"rgba(62, 207, 142, 0.5)",bottomColor:"rgba(62, 207, 142, 0.1)",lineColor:"#3ecf8e",lineWidth:2}),e.setData(t.map(e=>({time:e.time,value:e.close})));break;case"hlcArea":e=u.current.addAreaSeries({topColor:"rgba(62, 207, 142, 0.5)",bottomColor:"rgba(62, 207, 142, 0.1)",lineColor:"#3ecf8e",lineWidth:2}),e.setData(t.map(e=>({time:e.time,value:e.high})));break;case"columns":e=u.current.addHistogramSeries({color:"#3ecf8e"}),e.setData(t.map((e,r)=>({time:e.time,value:0===r?0:Math.abs(e.close-t[r-1].close),color:e.close>=e.open?"#3ecf8e":"#f45171"})));break;default:e=u.current.addCandlestickSeries({upColor:"#3ecf8e",downColor:"#f45171",borderVisible:!1,wickUpColor:"#3ecf8e",wickDownColor:"#f45171"}),e.setData(t)}m.current=e},[i,t]),e.useEffect(()=>{if(m.current&&u.current&&t.length)try{switch(i){case"line":case"area":m.current.setData(t.map(e=>({time:e.time,value:e.close})));break;case"hlcArea":m.current.setData(t.map(e=>({time:e.time,value:e.high})));break;case"columns":m.current.setData(t.map((e,r)=>({time:e.time,value:0===r?0:Math.abs(e.close-t[r-1].close),color:e.close>=e.open?"#3ecf8e":"#f45171"})));break;default:m.current.setData(t)}s&&(u.current.timeScale().fitContent(),o&&o(!1))}catch(e){console.error("Error updating chart data:",e)}},[t,i,s,o]),e.useEffect(()=>{if(!u.current||!t.length)return;const e=new Set;p.current.forEach((t,r)=>{"bollinger"===r||"bollinger-upper"===r||"bollinger-lower"===r||"bollinger-fill"===r?n.includes("bollinger")||e.add(r):"stddev"===r||"stddev-upper"===r||"stddev-lower"===r||"stddev-fill"===r?n.includes("stddev")||e.add(r):"bbpercent"===r||r.startsWith("bbpercent-ref")?n.includes("bbpercent")||e.add(r):n.includes(r)||e.add(r)}),e.forEach(e=>{const t=p.current.get(e);t&&u.current&&(u.current.removeSeries(t),p.current.delete(e))}),n.forEach(e=>{const r=p.current.get(e);switch(e){case"bollinger":const a=B(t,20,2);if(p.current.has("bollinger")&&p.current.has("bollinger-upper")&&p.current.has("bollinger-lower")&&p.current.has("bollinger-fill")){const e=p.current.get("bollinger-fill"),t=p.current.get("bollinger"),r=p.current.get("bollinger-upper"),n=p.current.get("bollinger-lower");e?.setData(a.map(e=>({time:e.time,value:e.upper}))),t?.setData(a.map(e=>({time:e.time,value:e.middle}))),r?.setData(a.map(e=>({time:e.time,value:e.upper}))),n?.setData(a.map(e=>({time:e.time,value:e.lower})))}else{if(["bollinger","bollinger-upper","bollinger-lower","bollinger-fill"].forEach(e=>{const t=p.current.get(e);t&&u.current&&(u.current.removeSeries(t),p.current.delete(e))}),!u.current)break;const e=u.current.addAreaSeries({topColor:"rgba(62, 207, 142, 0.05)",bottomColor:"rgba(62, 207, 142, 0.05)",lineColor:"transparent",lineWidth:0,crosshairMarkerVisible:!1}),t=u.current.addLineSeries({color:"rgba(62, 207, 142, 0.4)",lineWidth:1,lineStyle:2}),r=u.current.addLineSeries({color:"rgba(62, 207, 142, 0.8)",lineWidth:1}),n=u.current.addLineSeries({color:"rgba(62, 207, 142, 0.4)",lineWidth:1,lineStyle:2});e.setData(a.map(e=>({time:e.time,value:e.upper}))),t.setData(a.map(e=>({time:e.time,value:e.upper}))),r.setData(a.map(e=>({time:e.time,value:e.middle}))),n.setData(a.map(e=>({time:e.time,value:e.lower}))),p.current.set("bollinger-fill",e),p.current.set("bollinger",r),p.current.set("bollinger-upper",t),p.current.set("bollinger-lower",n)}break;case"sma20":const n=L(t,20);if(!r&&u.current){const t=u.current.addLineSeries({color:"#ff9800",lineWidth:2});t.setData(n.map(e=>({time:e.time,value:e.value}))),p.current.set(e,t)}else r&&r.setData(n.map(e=>({time:e.time,value:e.value})));break;case"sma50":const i=L(t,50);if(!r&&u.current){const t=u.current.addLineSeries({color:"#2196f3",lineWidth:2});t.setData(i.map(e=>({time:e.time,value:e.value}))),p.current.set(e,t)}else r&&r.setData(i.map(e=>({time:e.time,value:e.value})));break;case"ema12":const s=O(t,12);if(!r&&u.current){const t=u.current.addLineSeries({color:"#9c27b0",lineWidth:2});t.setData(s.map(e=>({time:e.time,value:e.value}))),p.current.set(e,t)}else r&&r.setData(s.map(e=>({time:e.time,value:e.value})));break;case"ema26":const o=O(t,26);if(!r&&u.current){const t=u.current.addLineSeries({color:"#e91e63",lineWidth:2});t.setData(o.map(e=>({time:e.time,value:e.value}))),p.current.set(e,t)}else r&&r.setData(o.map(e=>({time:e.time,value:e.value})));break;case"stddev":const c=function(e,t=20,r=2){if(e.length<t)return[];const a=[];for(let n=t-1;n<e.length;n++){const i=e.slice(n-t+1,n+1);let s=0,o=0,c=0,l=0;i.forEach((e,t)=>{const r=t,a=e.close;s+=r,o+=a,c+=r*a,l+=r*r});const d=i.length,u=(d*c-s*o)/(d*l-s*s),m=(o-u*s)/d,p=u*(t-1)+m;let h=0;i.forEach((e,t)=>{const r=u*t+m,a=e.close-r;h+=a*a});const g=Math.sqrt(h/t);a.push({upper:p+r*g,middle:p,lower:p-r*g,time:e[n].time})}return a}(t,20,2);if(p.current.has("stddev")&&p.current.has("stddev-upper")&&p.current.has("stddev-lower")&&p.current.has("stddev-fill")){const e=p.current.get("stddev-fill"),t=p.current.get("stddev"),r=p.current.get("stddev-upper"),a=p.current.get("stddev-lower");e?.setData(c.map(e=>({time:e.time,value:e.upper}))),t?.setData(c.map(e=>({time:e.time,value:e.middle}))),r?.setData(c.map(e=>({time:e.time,value:e.upper}))),a?.setData(c.map(e=>({time:e.time,value:e.lower})))}else{if(["stddev","stddev-upper","stddev-lower","stddev-fill"].forEach(e=>{const t=p.current.get(e);t&&u.current&&(u.current.removeSeries(t),p.current.delete(e))}),!u.current)break;const e=u.current.addAreaSeries({topColor:"rgba(156, 39, 176, 0.05)",bottomColor:"rgba(156, 39, 176, 0.05)",lineColor:"transparent",lineWidth:0,crosshairMarkerVisible:!1}),t=u.current.addLineSeries({color:"rgba(156, 39, 176, 0.6)",lineWidth:1,lineStyle:2}),r=u.current.addLineSeries({color:"rgba(156, 39, 176, 0.9)",lineWidth:2}),a=u.current.addLineSeries({color:"rgba(156, 39, 176, 0.6)",lineWidth:1,lineStyle:2});e.setData(c.map(e=>({time:e.time,value:e.upper}))),t.setData(c.map(e=>({time:e.time,value:e.upper}))),r.setData(c.map(e=>({time:e.time,value:e.middle}))),a.setData(c.map(e=>({time:e.time,value:e.lower}))),p.current.set("stddev-fill",e),p.current.set("stddev",r),p.current.set("stddev-upper",t),p.current.set("stddev-lower",a)}break;case"bbpercent":const l=function(e,t=20,r=2){const a=B(e,t,r);if(0===a.length)return[];const n=[],i=e.length-a.length;for(let s=0;s<a.length;s++){const t=a[s],r=e[i+s].close,o=t.upper-t.lower,c=o>0?(r-t.lower)/o*100:50;n.push({value:c,time:t.time})}return n}(t,20,2);if(!r&&u.current){const t=u.current.addLineSeries({color:"#ff5722",lineWidth:2,priceScaleId:"bbpercent"});if(u.current&&u.current.priceScale("bbpercent").applyOptions({scaleMargins:{top:.8,bottom:0}}),t.setData(l.map(e=>({time:e.time,value:e.value}))),p.current.set(e,t),!u.current)break;const r=u.current.addLineSeries({color:"rgba(255, 87, 34, 0.3)",lineWidth:1,lineStyle:3,priceScaleId:"bbpercent",crosshairMarkerVisible:!1}),a=u.current.addLineSeries({color:"rgba(255, 87, 34, 0.3)",lineWidth:1,lineStyle:3,priceScaleId:"bbpercent",crosshairMarkerVisible:!1}),n=u.current.addLineSeries({color:"rgba(255, 87, 34, 0.3)",lineWidth:1,lineStyle:3,priceScaleId:"bbpercent",crosshairMarkerVisible:!1}),i=l.map(e=>e.time);r.setData(i.map(e=>({time:e,value:0}))),a.setData(i.map(e=>({time:e,value:50}))),n.setData(i.map(e=>({time:e,value:100}))),p.current.set("bbpercent-ref0",r),p.current.set("bbpercent-ref50",a),p.current.set("bbpercent-ref100",n)}else if(r){r.setData(l.map(e=>({time:e.time,value:e.value})));const e=l.map(e=>e.time);p.current.get("bbpercent-ref0")?.setData(e.map(e=>({time:e,value:0}))),p.current.get("bbpercent-ref50")?.setData(e.map(e=>({time:e,value:50}))),p.current.get("bbpercent-ref100")?.setData(e.map(e=>({time:e,value:100})))}}})},[n,t]),e.useEffect(()=>{t&&0!==t.length&&async function(){const e=t[0].time,r=t[t.length-1].time,a=await W(e,r,l);g(a)}()},[t,l]),t&&0!==t.length?Z.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[Z.jsx("div",{ref:d,style:{width:"100%",height:"calc(100% - 30px)"}}),c&&h.length>0&&u.current&&Z.jsx(q,{newsEvents:h,chart:u.current})]}):Z.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#8b8b8b"},children:"Loading chart data..."})}const H=[{name:"SYD",market:"ASX",openTime:"10:00",closeTime:"16:00"},{name:"TKY",market:"JPX",openTime:"09:00",closeTime:"15:00"},{name:"LON",market:"LSE",openTime:"08:00",closeTime:"16:30"},{name:"NYC",market:"NYSE",openTime:"09:30",closeTime:"16:00"}];function J(){const[t,r]=e.useState(new Date);e.useEffect(()=>{const e=setInterval(()=>{r(new Date)},1e3);return()=>clearInterval(e)},[]);const a=e=>{switch(e){case"ASX":return"Australia/Sydney";case"JPX":return"Asia/Tokyo";case"LSE":return"Europe/London";case"NYSE":return"America/New_York";default:return"Pacific/Auckland"}};return Z.jsxs("div",{className:"market-status-compact",children:[Z.jsxs("div",{className:"nz-time-compact",children:[Z.jsx("span",{className:"time-compact",children:(n=t,n.toLocaleString("en-NZ",{timeZone:"Pacific/Auckland",hour:"2-digit",minute:"2-digit",hour12:!1}))}),Z.jsx("span",{className:"timezone-compact",children:"NZDT"})]}),Z.jsx("div",{className:"markets-compact",children:H.map(e=>{const t=(e=>{const t=new Date,r=t.toLocaleString("en-US",{timeZone:a(e.market),hour:"2-digit",minute:"2-digit",hour12:!1}),[n,i]=e.openTime.split(":").map(Number),[s,o]=e.closeTime.split(":").map(Number),[c,l]=r.split(":").map(Number),d=60*c+l,u=60*n+i,m=60*s+o,p=t.getDay();return 0!==p&&6!==p&&d>=u&&d<m})(e);return Z.jsxs("div",{className:"market-compact "+(t?"open":""),children:[Z.jsx(i,{size:6,fill:t?"#3ecf8e":"#f45171",color:t?"#3ecf8e":"#f45171"}),Z.jsx("span",{children:e.name})]},e.name)})})]});var n}var Q={};function X(e,t){let r;try{r=e()}catch(a){return}return{getItem:e=>{var t;const a=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=r.getItem(e))?t:null;return n instanceof Promise?n.then(a):a(n)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}const K=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then:e=>K(e)(r),catch(e){return this}}}catch(r){return{then(e){return this},catch:e=>K(e)(r)}}},ee=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?("production"!==(Q?"production":void 0)&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),((e,t)=>(r,a,n)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},s=!1;const o=new Set,c=new Set;let l;try{l=i.getStorage()}catch(f){}if(!l)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...e)},a,n);const d=K(i.serialize),u=()=>{const e=i.partialize({...a()});let t;const r=d({state:e,version:i.version}).then(e=>l.setItem(i.name,e)).catch(e=>{t=e});if(t)throw t;return r},m=n.setState;n.setState=(e,t)=>{m(e,t),u()};const p=e((...e)=>{r(...e),u()},a,n);let h;const g=()=>{var e;if(!l)return;s=!1,o.forEach(e=>e(a()));const t=(null==(e=i.onRehydrateStorage)?void 0:e.call(i,a()))||void 0;return K(l.getItem.bind(l))(i.name).then(e=>{if(e)return i.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return h=i.merge(e,null!=(t=a())?t:p),r(h,!0),u()}).then(()=>{null==t||t(h,void 0),s=!0,c.forEach(e=>e(h))}).catch(e=>{null==t||t(void 0,e)})};return n.persist={setOptions:e=>{i={...i,...e},e.getStorage&&(l=e.getStorage())},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>s,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},g(),h||p})(e,t)):((e,t)=>(r,a,n)=>{let i={storage:X(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},s=!1;const o=new Set,c=new Set;let l=i.storage;if(!l)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...e)},a,n);const d=()=>{const e=i.partialize({...a()});return l.setItem(i.name,{state:e,version:i.version})},u=n.setState;n.setState=(e,t)=>{u(e,t),d()};const m=e((...e)=>{r(...e),d()},a,n);let p;n.getInitialState=()=>m;const h=()=>{var e,t;if(!l)return;s=!1,o.forEach(e=>{var t;return e(null!=(t=a())?t:m)});const n=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=a())?e:m))||void 0;return K(l.getItem.bind(l))(i.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return p=i.merge(e,null!=(t=a())?t:m),r(p,!0),d()}).then(()=>{null==n||n(p,void 0),p=a(),s=!0,c.forEach(e=>e(p))}).catch(e=>{null==n||n(void 0,e)})};return n.persist={setOptions:e=>{i={...i,...e},e.storage&&(l=e.storage)},clearStorage:()=>{null==l||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>h(),hasHydrated:()=>s,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},i.skipHydration||h(),p||m})(e,t),te=s()(ee((e,t)=>({indicators:[],selectedId:"butter-retail",timeRange:"10Y",categoryFilter:"all",alerts:[],addIndicator:t=>e(e=>e.indicators.some(e=>e.id===t.id)?e:{indicators:[...e.indicators,t]}),removeIndicator:t=>e(e=>({indicators:e.indicators.filter(e=>e.id!==t),selectedId:e.selectedId===t?null:e.selectedId})),updateIndicator:(t,r)=>e(e=>({indicators:e.indicators.map(e=>{if(e.id!==t)return e;const a=(r.currentValue??e.currentValue)-e.currentValue,n=0!==e.currentValue?a/e.currentValue*100:0;return{...e,...r,change:r.change??a,changePercent:r.changePercent??n,lastUpdated:new Date}})})),selectIndicator:t=>e({selectedId:t}),setTimeRange:t=>e({timeRange:t}),setCategoryFilter:t=>e({categoryFilter:t}),addAlert:t=>e(e=>({alerts:[...e.alerts,t]})),removeAlert:t=>e(e=>({alerts:e.alerts.filter(e=>e.id!==t)})),updateAlert:(t,r)=>e(e=>({alerts:e.alerts.map(e=>e.id===t?{...e,...r}:e)})),getFilteredIndicators:()=>{const e=t();return"all"===e.categoryFilter?e.indicators:e.indicators.filter(t=>t.category===e.categoryFilter)}}),{name:"buttergoup-storage",partialize:e=>({indicators:e.indicators.map(e=>({...e,data:[]})),alerts:e.alerts,timeRange:e.timeRange,selectedId:e.selectedId,categoryFilter:e.categoryFilter})}));function re(e,t=.02,r=3650){const a=[];let n=e;const i=[n];for(let c=1;c<r;c++){n*=1-.01*(n*(t+Math.random()*t*.5)*(Math.random()>.5?1:-1)),e<0?i.unshift(n):i.unshift(Math.max(n,.2*e))}const s=new Date;s.setDate(s.getDate()-r+1),console.log(`[generateMockPrices] Start date: ${s.toISOString()}`);for(let c=0;c<r;c++){const e=new Date(s);e.setDate(e.getDate()+c);const r=i[c],n=.3*t,o=0===c?r:i[c-1],l=i[c],d=Math.max(o,l)*(1+Math.random()*n),u=Math.min(o,l)*(1-Math.random()*n);a.push({time:e.toISOString().split("T")[0],open:Math.round(1e4*o)/1e4,high:Math.round(1e4*d)/1e4,low:Math.round(1e4*u)/1e4,close:Math.round(1e4*l)/1e4})}const o=new Date(s);return o.setDate(o.getDate()+r-1),console.log(`[generateMockPrices] Generated ${a.length} data points`),console.log(`[generateMockPrices] Date range: ${a[0].time} to ${a[a.length-1].time}`),console.log(`[generateMockPrices] End date: ${o.toISOString()}`),a}const ae=new Date,ne=[{id:"nzdusd",symbol:"NZD/USD",name:"New Zealand Dollar / US Dollar",category:"currency",base:"NZD",quote:"USD",currentValue:.5912,previousValue:.5895,change:.0017,changePercent:.29,bid:.5911,ask:.5913,spread:2e-4,unit:"",lastUpdated:ae,updateFrequency:"Real-time",data:re(.5912,.005)},{id:"nzdaud",symbol:"NZD/AUD",name:"New Zealand Dollar / Australian Dollar",category:"currency",base:"NZD",quote:"AUD",currentValue:.9085,previousValue:.9102,change:-.0017,changePercent:-.19,bid:.9084,ask:.9086,spread:2e-4,unit:"",lastUpdated:ae,updateFrequency:"Real-time",data:re(.9085,.003)},{id:"nzdeur",symbol:"NZD/EUR",name:"New Zealand Dollar / Euro",category:"currency",base:"NZD",quote:"EUR",currentValue:.5465,previousValue:.5478,change:-.0013,changePercent:-.24,bid:.5464,ask:.5466,spread:2e-4,unit:"",lastUpdated:ae,updateFrequency:"Real-time",data:re(.5465,.004)},{id:"nzdgbp",symbol:"NZD/GBP",name:"New Zealand Dollar / British Pound",category:"currency",base:"NZD",quote:"GBP",currentValue:.4598,previousValue:.4612,change:-.0014,changePercent:-.3,bid:.4597,ask:.4599,spread:2e-4,unit:"",lastUpdated:ae,updateFrequency:"Real-time",data:re(.4598,.004)},{id:"nzdjpy",symbol:"NZD/JPY",name:"New Zealand Dollar / Japanese Yen",category:"currency",base:"NZD",quote:"JPY",currentValue:89.45,previousValue:88.92,change:.53,changePercent:.6,bid:89.44,ask:89.46,spread:.02,unit:"",lastUpdated:ae,updateFrequency:"Real-time",data:re(89.45,.008)}],ie=[{id:"ocr",symbol:"OCR",name:"Official Cash Rate",category:"rate",currentValue:5.5,previousValue:5.5,change:0,changePercent:0,unit:"%",source:"Reserve Bank of New Zealand",lastUpdated:new Date("2024-02-28"),nextUpdate:new Date("2024-04-10"),updateFrequency:"Every 6 weeks",data:re(5.5,.001)},{id:"cpi",symbol:"CPI",name:"Consumer Price Index",category:"percentage",currentValue:4.7,previousValue:5.6,change:-.9,changePercent:-16.07,unit:"% YoY",source:"Statistics New Zealand",lastUpdated:new Date("2024-01-17"),nextUpdate:new Date("2024-04-17"),updateFrequency:"Quarterly",data:re(4.7,.02)},{id:"gdp",symbol:"GDP",name:"GDP Growth Rate",category:"percentage",currentValue:-.3,previousValue:.2,change:-.5,changePercent:-250,unit:"% QoQ",source:"Statistics New Zealand",lastUpdated:new Date("2023-12-21"),nextUpdate:new Date("2024-03-21"),updateFrequency:"Quarterly",data:re(-.3,.05)},{id:"unemployment",symbol:"UNEMP",name:"Unemployment Rate",category:"percentage",currentValue:4,previousValue:3.9,change:.1,changePercent:2.56,unit:"%",source:"Statistics New Zealand",lastUpdated:new Date("2024-02-07"),nextUpdate:new Date("2024-05-01"),updateFrequency:"Quarterly",data:re(4,.01)},{id:"twi",symbol:"TWI",name:"Trade Weighted Index",category:"index",currentValue:71.24,previousValue:70.89,change:.35,changePercent:.49,unit:"",source:"Reserve Bank of New Zealand",lastUpdated:ae,updateFrequency:"Daily",data:re(71.24,.01)}],se=[...[{id:"butter-retail",symbol:"BUTTER-R",name:"Butter Retail Price",category:"commodity",commodityType:"dairy",currentValue:7.5,previousValue:7.25,change:.25,changePercent:3.45,unit:"NZ$",measureUnit:"per 500g",source:"Fonterra Co-operative Group",lastUpdated:ae,updateFrequency:"Weekly",data:re(7.5,.015)},{id:"butter-export",symbol:"BUTTER-X",name:"Butter Export Price (Fonterra Reference)",category:"commodity",commodityType:"dairy",currentValue:7821,previousValue:7650,change:171,changePercent:2.24,unit:"US$",measureUnit:"per metric tonne",source:"Fonterra / GlobalDairyTrade",grade:"Premium",lastUpdated:new Date("2024-03-12"),updateFrequency:"Bi-weekly (GDT Auction)",data:re(7821,.025)},{id:"milk-farmgate",symbol:"MILK-FG",name:"Milk Price (Farmgate)",category:"commodity",commodityType:"dairy",currentValue:8.4,previousValue:8.2,change:.2,changePercent:2.44,unit:"NZ$",measureUnit:"per kg milk solids",source:"Fonterra",lastUpdated:new Date("2024-03-01"),updateFrequency:"Monthly",data:re(8.4,.02)},{id:"wmp",symbol:"WMP",name:"Whole Milk Powder (Fonterra Reference)",category:"commodity",commodityType:"dairy",currentValue:4332,previousValue:4250,change:82,changePercent:1.93,unit:"US$",measureUnit:"per metric tonne",source:"Fonterra / GlobalDairyTrade",grade:"Regular",lastUpdated:new Date("2024-03-12"),updateFrequency:"Bi-weekly (GDT Auction)",data:re(4332,.02)},{id:"smp",symbol:"SMP",name:"Skim Milk Powder (Fonterra Reference)",category:"commodity",commodityType:"dairy",currentValue:2817,previousValue:2750,change:67,changePercent:2.44,unit:"US$",measureUnit:"per metric tonne",source:"Fonterra / GlobalDairyTrade",grade:"Medium Heat",lastUpdated:new Date("2024-03-12"),updateFrequency:"Bi-weekly (GDT Auction)",data:re(2817,.025)},{id:"amf",symbol:"AMF",name:"Anhydrous Milk Fat (Fonterra Reference)",category:"commodity",commodityType:"dairy",currentValue:7273,previousValue:7150,change:123,changePercent:1.72,unit:"US$",measureUnit:"per metric tonne",source:"Fonterra / GlobalDairyTrade",lastUpdated:new Date("2024-03-12"),updateFrequency:"Bi-weekly (GDT Auction)",data:re(7273,.018)}],...ne,...ie];function oe(e,t,r=2){return"%"===t||"% YoY"===t||"% QoQ"===t?`${e.toFixed(r)}${t}`:e.toFixed(r)}function ce(){const{indicators:t,selectedId:r,categoryFilter:a,timeRange:n,addIndicator:i,updateIndicator:s,selectIndicator:C,setCategoryFilter:F,setTimeRange:R,getFilteredIndicators:E}=te(),[M,T]=e.useState(!1),[U,P]=e.useState([]),[z,V]=e.useState(!1),[A,L]=e.useState("candlestick"),[O,B]=e.useState(!1),[$,G]=e.useState(!0);e.useEffect(()=>{try{0===t.length?(se.forEach(i),setTimeout(()=>B(!0),100)):(t.forEach(e=>{const t=se.find(t=>t.id===e.id);t&&s(e.id,{data:t.data})}),setTimeout(()=>B(!0),100))}catch(e){console.error("Error initializing data:",e),e instanceof DOMException&&"QuotaExceededError"===e.name&&(localStorage.removeItem("buttergoup-storage"),window.location.reload())}},[]),e.useEffect(()=>{const e=setInterval(()=>{t.forEach(e=>{if("currency"===e.category){const t=.001*(Math.random()-.5),r=e.currentValue+t;s(e.id,{currentValue:r,previousValue:e.currentValue,lastUpdated:new Date})}})},5e3);return()=>clearInterval(e)},[t,s]);const W=E(),q=t.find(e=>e.id===r);return Z.jsxs("div",{className:"app",children:[Z.jsxs("header",{children:[Z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Z.jsx("img",{src:"/assets/logo-BnaxrZax.svg",alt:"ButterGoUp Logo",style:{height:"50px",width:"auto"}}),Z.jsxs("div",{children:[Z.jsx("h1",{children:"ButterGoUp"}),Z.jsx("p",{className:"subheader",children:"NZ Economic Eyes"})]})]}),Z.jsx(J,{}),Z.jsxs("button",{onClick:()=>{localStorage.removeItem("buttergoup-storage"),window.location.reload()},style:{padding:"0.5rem 1rem",backgroundColor:"#2e2e2e",color:"#ededed",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.2s ease",display:"flex",alignItems:"center"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#3ecf8e",e.currentTarget.style.color="#181818"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#2e2e2e",e.currentTarget.style.color="#ededed"},children:[Z.jsx(o,{size:16,style:{marginRight:"0.5rem",display:"inline"}}),"Reset Data"]})]}),Z.jsxs("main",{className:"container",children:[Z.jsxs("aside",{className:"toolbar",children:[Z.jsx("button",{className:"toolbar-button active",title:"Dashboard",children:Z.jsx(c,{size:20})}),Z.jsx("button",{className:"toolbar-button",title:"Add Indicator",children:Z.jsx(l,{size:20})}),Z.jsx("button",{className:"toolbar-button",title:"Filters",children:Z.jsx(d,{size:20})}),Z.jsx("button",{className:"toolbar-button "+(z?"active":""),title:"Chart Type",onClick:()=>V(!z),children:Z.jsx(u,{size:20})}),Z.jsx("button",{className:"toolbar-button "+(M?"active":""),title:"Technical Indicators",onClick:()=>T(!M),children:Z.jsx(m,{size:20})}),Z.jsx("button",{className:"toolbar-button "+($?"active":""),title:"News Markers",onClick:()=>G(!$),children:Z.jsx(p,{size:20})}),Z.jsx("button",{className:"toolbar-button",title:"Alerts",children:Z.jsx(h,{size:20})}),Z.jsx("div",{className:"toolbar-divider"}),Z.jsx("button",{className:"toolbar-button",title:"Export Data",children:Z.jsx(g,{size:20})}),Z.jsx("button",{className:"toolbar-button",title:"Reports",children:Z.jsx(f,{size:20})}),Z.jsx("div",{className:"toolbar-divider"}),Z.jsx("button",{className:"toolbar-button",title:"Theme",children:Z.jsx(y,{size:20})}),Z.jsx("button",{className:"toolbar-button",title:"Settings",children:Z.jsx(b,{size:20})})]}),Z.jsx("section",{className:"chart-section",children:q?Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{className:"chart-container",children:q&&q.data&&q.data.length>0?Z.jsx(_,{data:(()=>{if(!q)return[];const e=new Date;let t=new Date;switch(n){case"1W":t.setDate(e.getDate()-7);break;case"1M":t.setMonth(e.getMonth()-1);break;case"3M":t.setMonth(e.getMonth()-3);break;case"1Y":t.setFullYear(e.getFullYear()-1);break;case"5Y":t.setFullYear(e.getFullYear()-5);break;case"10Y":t.setFullYear(e.getFullYear()-10)}return q.data.filter(e=>new Date(e.time)>=t)})(),activeIndicators:U,chartType:A,shouldFitContent:O,setShouldFitContent:B,showNews:$,indicatorId:q.id}):Z.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#8b8b8b"},children:"Loading chart data..."})}),z&&Z.jsxs("div",{className:"chart-types-panel",children:[Z.jsx("h3",{children:"Chart Type"}),Z.jsxs("div",{className:"chart-type-options",children:[Z.jsxs("button",{className:"chart-type-option "+("candlestick"===A?"active":""),onClick:()=>{L("candlestick"),V(!1)},children:[Z.jsx(u,{size:16}),Z.jsx("span",{children:"Candlestick"})]}),Z.jsxs("button",{className:"chart-type-option "+("line"===A?"active":""),onClick:()=>{L("line"),V(!1)},children:[Z.jsx(v,{size:16}),Z.jsx("span",{children:"Line"})]}),Z.jsxs("button",{className:"chart-type-option "+("area"===A?"active":""),onClick:()=>{L("area"),V(!1)},children:[Z.jsx(x,{size:16}),Z.jsx("span",{children:"Area"})]}),Z.jsxs("button",{className:"chart-type-option "+("hlcArea"===A?"active":""),onClick:()=>{L("hlcArea"),V(!1)},children:[Z.jsx(w,{size:16}),Z.jsx("span",{children:"HLC Area"})]}),Z.jsxs("button",{className:"chart-type-option "+("columns"===A?"active":""),onClick:()=>{L("columns"),V(!1)},children:[Z.jsx(k,{size:16}),Z.jsx("span",{children:"Columns"})]})]})]}),M&&Z.jsxs("div",{className:"indicators-panel",children:[Z.jsx("h3",{children:"Technical Indicators"}),Z.jsxs("div",{className:"indicator-options",children:[Z.jsxs("label",{className:"indicator-option",children:[Z.jsx("input",{type:"checkbox",checked:U.includes("bollinger"),onChange:e=>{e.target.checked?P([...U,"bollinger"]):P(U.filter(e=>"bollinger"!==e))}}),Z.jsx("span",{children:"Bollinger Bands"})]}),Z.jsxs("label",{className:"indicator-option",children:[Z.jsx("input",{type:"checkbox",checked:U.includes("sma20"),onChange:e=>{e.target.checked?P([...U,"sma20"]):P(U.filter(e=>"sma20"!==e))}}),Z.jsx("span",{children:"SMA (20)"})]}),Z.jsxs("label",{className:"indicator-option",children:[Z.jsx("input",{type:"checkbox",checked:U.includes("sma50"),onChange:e=>{e.target.checked?P([...U,"sma50"]):P(U.filter(e=>"sma50"!==e))}}),Z.jsx("span",{children:"SMA (50)"})]}),Z.jsxs("label",{className:"indicator-option",children:[Z.jsx("input",{type:"checkbox",checked:U.includes("ema12"),onChange:e=>{e.target.checked?P([...U,"ema12"]):P(U.filter(e=>"ema12"!==e))}}),Z.jsx("span",{children:"EMA (12)"})]}),Z.jsxs("label",{className:"indicator-option",children:[Z.jsx("input",{type:"checkbox",checked:U.includes("ema26"),onChange:e=>{e.target.checked?P([...U,"ema26"]):P(U.filter(e=>"ema26"!==e))}}),Z.jsx("span",{children:"EMA (26)"})]}),Z.jsxs("label",{className:"indicator-option",children:[Z.jsx("input",{type:"checkbox",checked:U.includes("stddev"),onChange:e=>{e.target.checked?P([...U,"stddev"]):P(U.filter(e=>"stddev"!==e))}}),Z.jsx("span",{children:"Std Dev Channels"})]}),Z.jsxs("label",{className:"indicator-option",children:[Z.jsx("input",{type:"checkbox",checked:U.includes("bbpercent"),onChange:e=>{e.target.checked?P([...U,"bbpercent"]):P(U.filter(e=>"bbpercent"!==e))}}),Z.jsx("span",{children:"BB %ile"})]})]})]}),Z.jsx("div",{className:"chart-header",children:Z.jsxs("div",{children:[Z.jsxs("h2",{children:[q.symbol," - ",q.name,"commodity"===q.category&&"measureUnit"in q&&Z.jsxs("span",{className:"measure-unit",children:[" (",q.measureUnit,")"]})]}),"source"in q&&Z.jsxs("p",{className:"data-source",children:["Source: ",q.source]})]})}),Z.jsxs("div",{className:"price-info",children:[Z.jsxs("div",{className:"current-value",children:[Z.jsx("span",{className:"value-label",children:"Current"}),Z.jsxs("span",{className:"value",children:["currency"===q.category||"%"===q.unit?"":q.unit,oe(q.currentValue,q.unit,"currency"===q.category?4:2)]}),Z.jsxs("span",{className:"value-change "+(q.change>=0?"positive":"negative"),children:[q.change>=0?Z.jsx(v,{size:20,style:{display:"inline",marginRight:"0.5rem"}}):Z.jsx(j,{size:20,style:{display:"inline",marginRight:"0.5rem"}}),q.change>=0?"+":"",q.change.toFixed("currency"===q.category?4:2),"(",q.changePercent>=0?"+":"",q.changePercent.toFixed(2),"%)"]})]}),"currency"===q.category&&"bid"in q&&Z.jsxs("div",{className:"bid-ask-spread",children:[Z.jsxs("div",{children:[Z.jsx("span",{className:"label",children:"Bid"}),Z.jsx("span",{className:"value",children:q.bid?.toFixed(4)})]}),Z.jsxs("div",{children:[Z.jsx("span",{className:"label",children:"Ask"}),Z.jsx("span",{className:"value",children:q.ask?.toFixed(4)})]}),Z.jsxs("div",{children:[Z.jsx("span",{className:"label",children:"Spread"}),Z.jsx("span",{className:"value",children:q.spread?.toFixed(4)})]})]}),"nextUpdate"in q&&q.nextUpdate&&Z.jsxs("div",{className:"next-update",children:["Next update: ",("string"==typeof q.nextUpdate?new Date(q.nextUpdate):q.nextUpdate).toLocaleDateString("en-NZ")]})]}),Z.jsx("div",{className:"time-range-overlay",children:Z.jsx("div",{className:"time-range-selector",children:["1W","1M","3M","1Y","5Y","10Y"].map(e=>Z.jsx("button",{className:"time-range-btn "+(n===e?"active":""),onClick:()=>{R(e),B(!0)},children:e},e))})})]}):Z.jsx("div",{className:"empty-state",children:"Select an indicator to view chart"})}),Z.jsxs("aside",{className:"sidebar",children:[Z.jsx("div",{className:"filter-section",children:Z.jsx("select",{value:a,onChange:e=>F(e.target.value),className:"category-filter",children:[{value:"all",label:"All Indicators"},{value:"currency",label:"Currencies"},{value:"rate",label:"Interest Rates"},{value:"index",label:"Indices"},{value:"percentage",label:"Economic Data"},{value:"commodity",label:"Commodities"}].map(e=>Z.jsx("option",{value:e.value,children:e.label},e.value))})}),Z.jsx("div",{className:"indicator-list",children:W.map((e,t)=>{const a="currency"===e.category,n="commodity"===e.category;return Z.jsxs("div",{className:"indicator-item "+(r===e.id?"active":""),onClick:()=>{C(e.id),B(!0)},children:[Z.jsxs("div",{className:"indicator-left",children:[Z.jsxs("div",{className:"indicator-header",children:[Z.jsx("span",{className:"indicator-icon",children:(()=>{switch(e.category){case"currency":return Z.jsx(I,{size:16});case"rate":return Z.jsx(D,{size:16});case"index":return Z.jsx(w,{size:16});case"percentage":return Z.jsx(S,{size:16});case"commodity":return Z.jsx(N,{size:16});default:return null}})()}),Z.jsx("strong",{children:e.symbol})]}),Z.jsxs("div",{className:"indicator-name",children:[e.name,n&&"measureUnit"in e&&Z.jsxs("span",{className:"measure-unit",children:[" (",e.measureUnit,")"]})]})]}),Z.jsxs("div",{className:"indicator-right",children:[Z.jsx("div",{className:"indicator-value",children:Z.jsxs("strong",{children:[a||"%"===e.unit?"":e.unit,oe(e.currentValue,e.unit,a?4:2)]})}),Z.jsxs("div",{className:"indicator-change "+(e.change>=0?"positive":"negative"),children:[e.change>=0?"+":"",e.changePercent.toFixed(2),"%"]})]})]},`${e.id}-${t}`)})})]})]})]})}V(document.getElementById("root")).render(Z.jsx(e.StrictMode,{children:Z.jsx(ce,{})}));
